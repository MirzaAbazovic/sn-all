server {
	listen 80 default_server;

	 resolver 127.0.0.11 valid=30s;

	gzip on;
	gzip_min_length 1000;
	gzip_types text/plain text/xml application/javascript text/css;

	root /apps;


location /party {
  try_files $uri /party/index.html;
}

location /catalog {
  try_files $uri /catalog/index.html;
}

location /agreement {
  try_files $uri /agreement/index.html;
}

location /order {
  try_files $uri /order/index.html;
}

location /reporting {
  try_files $uri /reporting/index.html;
}

location ~ ^/gateway/(.*)$ {
  proxy_pass http://api-gate/$1;
  proxy_http_version 1.1;
  proxy_set_header Upgrade $http_upgrade;
  proxy_set_header Connection 'upgrade';
  proxy_set_header Host $host;
  proxy_cache_bypass $http_upgrade;
}

}
