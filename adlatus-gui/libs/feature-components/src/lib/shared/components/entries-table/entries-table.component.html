<div class="entries-table">

  <adlatus-gui-entries-filter [filters]="filterParams" (filterApply)="handleFilterApply($event)"/>

  <table
    mat-table
    [dataSource]="dataSource"
    matSort
    (matSortChange)="handleSortChange($event)"
    class="mat-elevation-z2"
  >
    <ng-container *ngFor="let column of columns" [matColumnDef]="column.key">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        {{ column.label }}
      </th>
      <td mat-cell *matCellDef="let entity">
        <ng-container [ngSwitch]="column.key">
          <ng-container *ngSwitchCase="'action'">
            <button mat-raised-button class="successButton" (click)="detailsClick(entity)">Details</button>
          </ng-container>

          <ng-container *ngSwitchCase="'status'">
            <!-- handle other cases for status-->
            <span class="status"
              [class.pending]="entity.status === 'inProgress'"
              [class.success]="entity.status === 'completed'"
              [class.error]="entity.status === 'rejected'"
            >
              {{ entity.status }}
            </span>
          </ng-container>

          <ng-container *ngSwitchDefault>
            {{ getCellValue(entity, column) }}
          </ng-container>
        </ng-container>
      </td>
    </ng-container>

    <ng-container>
      <tr mat-header-row *matHeaderRowDef="displayColumns"></tr>
      <tr mat-row *matRowDef="let dataRow; columns: displayColumns" class="data-row"
      ></tr>
    </ng-container>

  </table>

  <div class="paginator">

    <mat-label>Items per page</mat-label>

    <select [(ngModel)]="pageSize" (change)="onPageSizeChange($event)" class="page-select">
      <option *ngFor="let opt of paginationOptions" [value]="opt.value">
        {{opt.viewValue}}
      </option>
    </select>

    <button mat-icon-button (click)="goToPreviousPage()" class="pagination-button">
      <mat-icon>keyboard_arrow_left</mat-icon>
    </button>

    <button mat-button>Page {{ totalPages > 0 ? pageIndex + 1 : totalPages }} of {{ totalPages }}</button>

    <button mat-icon-button (click)="goToNextPage()" class="pagination-button">
      <mat-icon>keyboard_arrow_right</mat-icon>
    </button>

  </div>


</div>
